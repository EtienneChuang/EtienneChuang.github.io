<!DOCTYPE html>
<META HTTP-EQUIV="CACHE-CONTROL" CONTENT="NO-CACHE">
<html>
<head>
	<title>Where To Buy Mask</title>
	<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
	<script type="text/javascript" src="https://cdn.datatables.net/1.10.20/js/jquery.dataTables.min.js"></script>
	<script type="text/javascript" src="https://cdn.datatables.net/fixedheader/3.1.6/js/dataTables.fixedHeader.min.js"></script>
	<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.20/css/jquery.dataTables.min.css">
	<link href="https://fonts.googleapis.com/css?family=Noto+Sans+TC&display=swap" rel="stylesheet">
	<style type="text/css">
		body {
			font-family: 'STHeiti', 'SimHei','Noto Sans TC', sans-serif;
		}
		.chart div {
			color : white;
			padding : 0px;
			margin : 2px;
			
			text-align: left;
			background-color: steelblue;
			font: 10px sans-serif;

		}
		#myTable {
			text-align: center;
		}
	</style>
</head>
<body>
	<div class="chart"></div>
	<div>
		<table id="myTable" class="display">
			<thead>
				<tr>
					<th>醫事機構名稱</th>
					<th>醫事機構地址</th>
					<th>醫事機構電話</th>
					<th>成人口罩總剩餘數</th>
					<th>兒童口罩剩餘數</th>
					<th>來源資料時間</th>
				</tr>
			</thead>
			<tbody></tbody>
		</table>
	</div>
</body>
	
<script type="text/javascript">
	let limit = 10;
	let lastUpdateTime = "";
	window.onload =  function() {
		$.get('https://shrouded-beyond-02362.herokuapp.com/Maskdata', function(data) {  
            console.log("data got!");  
			$('#myTable').DataTable({
               	"data": JSON.parse(data),
				"columns": [	
					{ "data": '醫事機構名稱' },
					{ "data": '醫事機構地址' },
					{ "data": '醫事機構電話' },
					{ "data": '成人口罩總剩餘數' },
					{ "data": '兒童口罩剩餘數' },
					{ "data": '來源資料時間' }
				],
				"columnDefs": [
            		{
                		targets:1, // 指定第幾欄
                		render: function ( data, type, row, meta ) {
                    		if(type === 'display'){
                        		data = '<a target="_blank" href="https://www.google.com/maps?q=' + encodeURIComponent(data) + '">'+data+'</a>';
                    		}
                    		return data;
                		}
            		}
            	]
			});
			$("#myTable>thead>tr>th").each(function(){
                $(this).css("position", "-webkit-sticky").css("position", "sticky").css("top", 0).css("background-color", "white")
            });
		});
	};
</script>
</html>